# Regression Analysis and Model Validation

## Data wrangling
Data wrangling is an important step in data analysis. This includes gathering, inspecting, transforming and mapping the data into a appropriate format for a variety of data analyses.

## Demo data sets

First step is to laod the data to the console. The data set that will be using for can be accessed using this link [http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-data.txt] (http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-data.txt). Information about the data set can be acessed through this link: [https://www.mv.helsinki.fi/home/kvehkala/JYTmooc/JYTOPKYS3-meta.txt] (https://www.mv.helsinki.fi/home/kvehkala/JYTmooc/JYTOPKYS3-meta.txt).

After loading the data we can check the dimension and structure of the data using 'dim()' and 'str()', respectively.

```{r}

date()

# installing packages

#install.packages(c('dplyr', 'ggplot2'))
library(dplyr)
library(GGally)
library(ggplot2)

# Read the data
data <- read.table("http://www.helsinki.fi/~kvehkala/JYTmooc/JYTOPKYS3-data.txt", sep = "\t", header = TRUE)

# Inspect the dimension and structure of the data
dim(data)
str(data)


```

We can also add new columns with the following names: '




```{r}

#-- create 'attitude' column
data$attitude<-data$Attitude/10

#-- create 'deep' column
deep_q<-c("D03", "D11", "D19", "D27", "D07", "D14", 
          "D22", "D30","D06",  "D15", "D23", "D31")
deep_c<-select(data, one_of(deep_q))
data$deep<-rowMeans(deep_c)

#-- create 'stra' column
strategic_q <- c("ST01","ST09","ST17","ST25","ST04","ST12",
                         "ST20","ST28")

strategic_c<-select(data, one_of(strategic_q))
data$stra<-rowMeans(strategic_c)

#create 'surf' column
surface_q <- c("SU02","SU10","SU18","SU26", "SU05","SU13",
                       "SU21","SU29","SU08","SU16","SU24","SU32")
surface_c<-select(data, one_of(surface_q))
data$surf<-rowMeans(surface_c)

#-- columns to keep
keep_columns <- c("gender","Age","attitude", "deep", 
                  "stra", "surf", "Points")

#-- create a new dataset
l2014<-select(data, one_of(keep_columns))

#-- check structure
str(l2014)


```


